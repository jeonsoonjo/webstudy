<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="../styles/pratice.css">
</head>
<body>
    
    <div class="container">
        <!-- 네이버 로고 -->
        <header>
            <h1></h1>
        </header>

        <!-- 본문 -->
        <section>
            <form name="join" method="post">
                <!-- 아이디 -->
                <div class="row">
                    <h3 class="title">
                        <label for="id">아이디</label>
                    </h3>
                    <div class="box">
                        <input type="text" name="id" id="id" class="int">
                        <span class="int_url">@naver.com</span>
                    </div>
                    <!-- 아이디체크결과 -->
                    <p id="id_check"></p>
                </div>

                <!-- 비밀번호 -->
                <div class="row">
                    <h3 class="title">
                        <label for="pw">비밀번호</label>
                    </h3>
                    <div class="box">
                        <input type="password" name="pw" id="pw" class="int">
                        <span class="int_url"><i class="fas fa-unlock"></i></span>
                    </div>
                    <!-- 비밀번호체크결과 -->
                    <p id="pw_check"></p>
                </div>

                <!-- 비밀번호 재확인 -->
                <div class="row">
                    <h3 class="title">
                        <label for="re_pw">비밀번호 재확인</label>
                    </h3>
                    <div class="box">
                        <input type="password" name="re_pw" id="re_pw" class="int">
                        <span class="int_url"><i class="far fa-check-circle"></i></span>
                    </div>
                    <!-- 비밀번호 재확인 체크결과 -->
                    <p id="re_pw_check"></p>
                </div>
                <br><br>

                <!-- 이름 -->
                <div class="row">
                    <h3 class="title">
                        <label for="name">이름</label>
                    </h3>
                    <div class="box no_padding_box">
                        <input type="text" name="name" id="name" class="int">
                    </div>
                    <!-- 이름체크결과 -->
                    <p id="name_check"></p>
                </div>

                <!-- 생년월일 box, birth_box / int, int2 -->
                <div class="row">
                    <h3 class="title">
                        <label for="birth">생년월일</label>
                    </h3>

                    <div class="ymd">
                        <!-- 년도 -->
                        <div class="box birth_box">
                            <input type="text" name="yyyy" id="yyyy" class="int int2" maxlength="4" placeholder="년(4자)">
                        </div>
                        <!-- 월 -->
                        <div class="box birth_box">
                            <select name="mm" id="mm" class="int int2">
                                <option value="">월</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                        </div>
                        <!-- 일 -->
                        <div class="box birth_box">
                            <input type="text" name="dd" id="dd" class="int int2" maxlength="2" placeholder="일">
                        </div>
                    </div>
                    <!-- 생년월일체크결과 -->
                    <p id="birth_check"></p>
                </div>

                <!-- 성별 -->
                <div class="row">
                    <h3 class="title">
                        <label for="gender">성별</label>
                    </h3>
                    <div class="box no_padding_box">
                        <select name="gender" id="gender" class="int">
                            <option value="">성별</option>
                            <option value="male">남자</option>
                            <option value="female">여자</option>
                            <option value="unisex">선택 안함</option>
                        </select>
                    </div>
                    <!-- 성별체크결과 -->
                    <p id="gender_check"></p>
                </div>

                <!-- 본인 확인 이메일 -->
                <div class="row">
                    <h3 class="title">
                        <label for="email">본인 확인 이메일<span class="term">(선택)</span></label>
                    </h3>
                    <div class="box no_padding_box">
                        <input type="text" name="email" id="email" class="int">
                    </div>
                    <!-- 이메일체크결과 -->
                    <p id="email_check"></p>
                </div>
                <br><br>

                <!-- 휴대전화 -->
                <div class="row">
                    <h3 class="title">
                        <label for="mobile">휴대전화</label>
                    </h3>

                    <!-- 나라 mobile1 -->
                    <div class="box no_padding_box">
                        <select name="mobile1" class="int">
                            <option value="대한민국" selected>대한민국 +82</option>
                            <option value="가나">가나 +111</option>
                            <option value="일본">일본 + 90</option>
                        </select>
                    </div>
                    <!-- 번호입력 mobile2 / mobile_box -->
                    <div class="mobile_box">
                        <div class="box no_padding_box">
                            <input type="text" name="mobile2" id="mobile2" class="int int2" placeholder="전화번호 입력">
                        </div>
                        <!-- 인증번호 버튼 btn_send -->
                        <a href="#" id="verify_btn" class="verify_btn">인증번호 받기</a>
                    </div>
                    <!-- 인증번호 확인 mobile3 -->
                    <div class="box no_padding_box">
                        <input type="text" name="auth" id="auth" class="int" placeholder="인증번호 입력하세요">
                    </div>
                    <!-- 휴대전화체크결과 -->
                    <p id="mobile2_check"></p>
                </div>
                <br><br>

                <!-- 가입하기 버튼 btn_send -->
                <div class="join_btn">
                    <button id="join_btn" class="join_btn">가입하기</button>
                </div>
            </form>
        </section>

        <!-- 하단 -->
        <footer>
            <p class="f1_info">
                <a>이용약관</a> | <a><strong>개인정보처리방침</strong></a> | <a>책임의 한계와 법적고지</a> | <a>회원정보 고객센터</a>
            </p>
            <div class="f2_info">
                <div>Copyright &copy; <strong>NAVER Corp.</strong> All Rights Reserved.</div>
            </div>
        </footer>
    </div>

    <script>
        // 아이디체크결과
        let id=document.getElementById('id');
        let idCheck=document.getElementById('id_check');
        let regID=/^[a-z0-9][a-z0-9_-]{4,19}$/;
        id.addEventListener('blur', function(){
            fn_idCheck();
        });
        function fn_idCheck(){
            let ret=false;
            if(id.value==''){
                idCheck.textContent='필수 정보입니다';
                idCheck.setAttribute('class', 'check_fail');
            } else{
                if(regID.test(id.value)){
                    idCheck.textContent='멋진 아이디네요!';
                    idCheck.setAttribute('class', 'check_pass');
                    ret=true;
                } else{
                    idCheck.textContent='5~20자의 영문 소문자, 숫자, 특수기호(_),(-)만 사용 가능합니다';
                    idCheck.setAttribute('class', 'check_fail');
                }
            }
            return ret;
        }

        // 비밀번호체크결과
        let pw=document.getElementById('pw');
        let pwCheck=document.getElementById('pw_check');
        let icon=document.querySelector('#pw + span');
        let regPW=/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[~!@#$%^&*])[A-Za-z0-9~!@#$%^&*]{4,16}$/;
        pw.addEventListener('blur', function(){
            fn_pwCheck();
        });
        function fn_pwCheck(){
            let ret=false;
            if(pw.value==''){
                icon.setAttribute('class', 'int_url check_fail');
                pwCheck.textContent='필수 정보입니다';
                pwCheck.setAttribute('class', 'check_fail');
            } else{
                if(regPW.test(pw.value)){
                    icon.setAttribute('class', 'int_url check_pass');
                    pwCheck.textContent='보안수준이 높은 비밀번호네요!';
                    pwCheck.setAttribute('class', 'check_pass');
                    ret=true;
                } else{
                    icon.setAttribute('class', 'int_url check_fail');
                    pwCheck.textContent='8~16자의 영문 대,소문자, 특수기호를 사용하세요';
                    pwCheck.setAttribute('class', 'check_fail');
                }
            }
            return ret;
        }

        // 비밀번호 재확인 체크결과
        let rePw=document.getElementById('re_pw');
        let rePwCheck=document.getElementById('re_pw_check');
        let reIcon=document.querySelector('#re_pw + span');
        rePw.addEventListener('blur', function(){
            fn_rePwCheck();
        });
        function fn_rePwCheck(){
            let ret=false;
            if(rePw.value==''){
                reIcon.setAttribute('class', 'int_url check_fail');
                rePwCheck.textContent='필수 정보입니다';
                rePwCheck.setAttribute('class', 'check_fail');
            } else if(rePw.value==pw.value){
                reIcon.setAttribute('class', 'int_url check_pass');
                rePwCheck.textContent='일치합니다!';
                rePwCheck.setAttribute('class', 'check_pass');
                ret=true;
            } else{
                reIcon.setAttribute('class', 'int_url check_fail');
                rePwCheck.textContent='일치하지 않습니다!! 확인해주세요';
                rePwCheck.setAttribute('class', 'check_fail');
            }
            return ret;
        }

        // 이름체크결과
        let name=document.getElementById('name');
        let nameCheck=document.getElementById('name_check');
        let regName=/^[가-힣a-zA-Z]+$/;
        name.addEventListener('blur', function(){
            fn_nameCheck();
        });
        function fn_nameCheck(){
            let ret=false;
            if(name.value==''){
                nameCheck.textContent='필수 정보입니다';
                nameCheck.setAttribute('class', 'check_fail');
            } else{
                if(regName.test(name.value)){
                    nameCheck.textContent='';
                    ret=true;
                } else{
                    nameCheck.textContent='한글과 영문 대,소문자를 사용하세요(특수기호, 공백 사용불가)';
                    nameCheck.setAttribute('class', 'check_fail');
                }
            }
            return ret;
        }

        // 생년월일체크결과
        let yyyy=document.getElementById('yyyy');
        let mm=document.getElementById('mm');
        let dd=document.getElementById('dd');
        let birthCheck=document.getElementById('birth_check');
        yyyy.addEventListener('blur', function(){
            fn_birthDayCheck();
        });
        mm.addEventListener('blur', function(){
            fn_birthDayCheck();
        });
        dd.addEventListener('blur', function(){
            fn_birthDayCheck();
        });
        function fn_birthDayCheck(){
            let ret=false;
            if(yearCheck() && monthCheck() && dayCheck()){
                birthCheck.textContent='';
                ret=true;
            }
            return ret;
        }
        function yearCheck(){
            let ret=false;
            if(yyyy.value.length < 4){
                birthCheck.textContent='태어난 년도 4자리를 정확하게 입력하세요';
                birthCheck.setAttribute('class', 'check_fail');
            } else{
                let nowYear=new Date().getFullYear();
                if(nowYear - yyyy.value >= 100){
                    birthCheck.textContent='정말이세요???';
                    birthCheck.setAttribute('class', 'check_fail');
                } else if(nowYear < yyyy.value){
                    birthCheck.textContent='미래에서 오셨나요..??';
                } else{
                    ret=true;
                }
            }
            return ret;
        }
        function monthCheck(){
            let ret=false;
            if(mm.value==''){
                birthCheck.textContent='태어난 월을 선택하세요';
                birthCheck.setAttribute('class', 'check_fail');
            } else{
                ret=true;
            }
            return ret;
        }
        function dayCheck(){
            let ret=false;
            let endDay=[0, 31, 29, 31, 30, 31, 30, 31, 30, 31, 30, 31, 31];
            if(dd.value=='' || dd.value > endDay[mm.value]){
                birthCheck.textContent='태어난 일(날짜) 2자리를 정확하게 입력하세요';
            } else{
                ret=true;
            }
            return ret;
        }
        
        // 성별체크결과
        let gender=document.getElementById('gender');
        let genderCheck=document.getElementById('gender_check');
        gender.addEventListener('blur', function(){
            fn_genderCheck();
        });
        function fn_genderCheck(){
            let ret=false;
            if(gender.value==''){
                genderCheck.textContent='필수 정보입니다';
                genderCheck.setAttribute('class', 'check_fail');
            } else{
                genderCheck.textContent='';
                ret=true;
            }
            return ret;
        }

        // 이메일체크결과
        let email=document.getElementById('email');
        let emailCheck=document.getElementById('email_check');
        let regEmail=/^[a-z0-9][a-z0-9_-]*@[a-zA-Z0-9]+([.][a-zA-Z]{2,}){1,2}$/;
        email.addEventListener('blur', function(){
            fn_emailCheck();
        });
        function fn_emailCheck(){
            let ret=false;
            if(email.value=='' || regEmail.test(email.value)){
                emailCheck.textContent='';
                ret=true;
            } else{
                emailCheck.textContent='이메일 주소를 다시 확인해주세요';
                emailCheck.setAttribute('class', 'check_fail');
            }
        }

        // 휴대전화체크결과
        let mobile2=document.getElementById('mobile2');
        let mobile2Check=document.getElementById('mobile2_check');
        let verifyBtn=document.getElementById('verify_btn');
        let regMobile2=/^010[0-9]{8}$/;
        verifyBtn.addEventListener('click', function(){
            fn_mobile2Check();
        });
        function fn_mobile2Check(){
            let ret=false;
            mobile2.value=mobile2.value.split('-').join('');
            if(regMobile2.test(mobile2.value)){
                mobile2Check.innerHTML='인증번호를 발송했습니다(유효시간 3분)<br>인증번호가 오지 않으면 입력하신 번호가 정확한지 확인하여 주세요.<br>이미 가입하신 번호나, 존재하지 않는 번호에는 인증번호가 발송되지 않습니다!';
                mobile2Check.setAttribute('class', 'check_pass');
            } else{
                mobile2Check.textContent='형식에 맞지 않는 번호입니다. 다시 입력해주세요';
                mobile2Check.setAttribute('class', 'check_fail');
            }
            return ret;
        }

        // 가입하기버튼
        document.getElementById('join_btn').addEventListener('click', function(event){
    		if (fn_idCheck() &&
    			fn_pwCheck() &&
    			fn_rePwCheck() &&
    			fn_nameCheck() &&
    			fn_birthDayCheck() &&
    			fn_genderCheck() &&
    			fn_emailCheck() &&
    			fn_mobile2Check()) {
    			if(confirm('가입할까요?')) {
    				alert('가입되었습니다.');
    				return true;
    			} else{
    				event.preventDefault();
        			return false;
    			}
    		} else{
    			event.preventDefault();
    			return false;
    		}
    	});

    </script>

</body>
</html>


